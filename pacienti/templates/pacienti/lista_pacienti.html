{% extends 'back.html' %}

{% block title %}Lista Pacienți{% endblock %}

{% block content %}
<h1>Pacienți înregistrați</h1>

<form method="get">
    <input type="text" name="q" placeholder="Caută după nume/prenume" value="{{ query }}">
    
    <select name="sex">
        <option value="">Toți</option>
        <option value="M" {% if selected_sex == 'M' %}selected{% endif %}>Masculin</option>
        <option value="F" {% if selected_sex == 'F' %}selected{% endif %}>Feminin</option>
    </select>
    <select name="studii">
        <option value="">Toți</option>
        <option value="cu" {% if studii_filter == 'cu' %}selected{% endif %}>Doar cu studii</option>
        <option value="fara" {% if studii_filter == 'fara' %}selected{% endif %}>Doar fără studii</option>
    </select>
    

    <button type="submit">Filtrează</button>
</form>


{% if pacienti %}
    <ul>
        {% for pacient in pacienti %}
            <li>
                {{ pacient.nume }} {{ pacient.prenume }} – {{ pacient.email }}
                <a href="{% url 'editeaza_pacient' pacient.id %}">✏️ Editare</a>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Nu există pacienți care să corespundă căutării.</p>
{% endif %}

<a href="{% url 'adauga_pacient' %}">Adaugă pacient nou</a>
{% endblock %}
